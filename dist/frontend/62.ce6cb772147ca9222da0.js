"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[62],{62:(j,Z,a)=>{a.r(Z),a.d(Z,{EditempleadoModule:()=>R});var h=a(8583),u=a(4655),r=a(3679),E=a(9765),T=a(5319),e=a(7716),A=a(3671),C=a(8060),x=a(9344),f=a(8295),b=a(9983),q=a(7441),F=a(1095),I=a(2458);function M(t,d){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij(" ",o.getErrorMessage("nombre")," ")}}function O(t,d){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij(" ",o.getErrorMessage("ape_pat")," ")}}function y(t,d){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij(" ",o.getErrorMessage("ape_mat")," ")}}function w(t,d){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij(" ",o.getErrorMessage("correo")," ")}}function N(t,d){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij(" ",o.getErrorMessage("celular")," ")}}function P(t,d){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij(" ",o.getErrorMessage("direccion")," ")}}function U(t,d){if(1&t&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&t){const o=d.$implicit;e.Q6J("value",o.nombre),e.xp6(1),e.hij(" ",o.nombre," ")}}function J(t,d){if(1&t&&(e.ynx(0),e._UZ(1,"img",33),e.BQk()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("src",o.imageSrc,e.LSH)}}function V(t,d){if(1&t&&e._UZ(0,"img",34),2&t){const o=e.oxw();e.Q6J("src",o.url,e.LSH)}}const S=[{path:"",component:(()=>{class t{constructor(o,i,l,n,m){this.empleadosService=o,this.authService=i,this.rutaActiva=l,this.toastr=n,this.router=m,this.newFile=null,this.imageSrc="assets/img/image-not-found.png",this.imageDefault="http://localhost:3000/",this.destroy$=new E.xQ,this.user=null,this.subscription=new T.w,this.roles=[{id:1,nombre:"Administrador"},{id:3,nombre:"Fotografo"},{id:4,nombre:"Recepcionista"}],this.selectedRol="",this.isDisabled=!0,this.id="",this.editarEmpleadoForm=new r.cw({id:new r.NI(0,r.kI.required),nombre:new r.NI("",[r.kI.required,r.kI.maxLength(20)]),ape_pat:new r.NI("",[r.kI.required,r.kI.maxLength(20)]),ape_mat:new r.NI("",[r.kI.required,r.kI.maxLength(20)]),celular:new r.NI(0,[r.kI.required,r.kI.maxLength(10),r.kI.minLength(10)]),direccion:new r.NI("",[r.kI.required,r.kI.maxLength(50)]),correo:new r.NI("",[r.kI.required,r.kI.maxLength(60),r.kI.email]),rol_id:new r.NI(0,[r.kI.required]),usuario_modificacion_id:new r.NI(0,[r.kI.required]),file:new r.NI})}ngOnDestroy(){this.subscription.unsubscribe(),this.destroy$.next({}),this.destroy$.complete()}ngOnInit(){this.getUser(),this.id=this.rutaActiva.snapshot.params.id,this.empleadosService.getEmpleado(this.id).subscribe(o=>{o?(this.url=this.imageDefault+o.url_imagen,this.editarEmpleadoForm.controls.id.setValue(o.id),this.editarEmpleadoForm.controls.nombre.setValue(o.nombre),this.editarEmpleadoForm.controls.ape_pat.setValue(o.ape_pat),this.editarEmpleadoForm.controls.ape_mat.setValue(o.ape_mat),this.editarEmpleadoForm.controls.celular.setValue(o.celular),this.editarEmpleadoForm.controls.direccion.setValue(o.direccion),this.editarEmpleadoForm.controls.correo.setValue(o.correo),this.editarEmpleadoForm.controls.rol_id.setValue(o.rol_id),this.editarEmpleadoForm.controls.usuario_modificacion_id.setValue(this.user.id),this.roles.forEach(i=>{i.id==o.rol_id&&(this.selectedRol=i.nombre)})):this.router.navigate(["/empleados"])})}editarEmpleado(){var o,i,l,n,m,p,g,c,v,s=new FormData;s.append("nombre",null===(o=this.editarEmpleadoForm.get("nombre"))||void 0===o?void 0:o.value),s.append("ape_pat",null===(i=this.editarEmpleadoForm.get("ape_pat"))||void 0===i?void 0:i.value),s.append("ape_mat",null===(l=this.editarEmpleadoForm.get("ape_mat"))||void 0===l?void 0:l.value),s.append("celular",null===(n=this.editarEmpleadoForm.get("celular"))||void 0===n?void 0:n.value),s.append("direccion",null===(m=this.editarEmpleadoForm.get("direccion"))||void 0===m?void 0:m.value),s.append("correo",null===(p=this.editarEmpleadoForm.get("correo"))||void 0===p?void 0:p.value),s.append("rol_id",null===(g=this.editarEmpleadoForm.get("rol_id"))||void 0===g?void 0:g.value),s.append("usuario_modificacion_id",null===(c=this.editarEmpleadoForm.get("usuario_modificacion_id"))||void 0===c?void 0:c.value),s.append("file",null===(v=this.editarEmpleadoForm.get("file"))||void 0===v?void 0:v.value),this.empleadosService.updateEmpleado(this.id,s).subscribe(_=>{console.log(_),_&&(this.toastr.success("El empleado fue actualizado exitosamente","Empleado actualizado",{positionClass:"toast-bottom-right"}),this.router.navigate(["/empleados"]))})}getUser(){this.user=this.authService.getUser()}changeRol(o){this.roles.forEach(i=>{i.nombre==o&&this.editarEmpleadoForm.controls.rol_id.setValue(i.id)})}onFileSelected(o){var i;this.editarEmpleadoForm.patchValue({file:o.target.files[0]}),null===(i=this.editarEmpleadoForm.get("file"))||void 0===i||i.updateValueAndValidity();var n=new FileReader;n.readAsDataURL(o.target.files[0]),n.onload=m=>{this.url=n.result}}getErrorMessage(o){var i,l,n,m,p,g;let c="";return(null===(l=null===(i=this.editarEmpleadoForm.get(o))||void 0===i?void 0:i.errors)||void 0===l?void 0:l.required)?c="El campo no puede estar vacio":(null===(n=this.editarEmpleadoForm.get(o))||void 0===n?void 0:n.hasError("maxlength"))?c="El campo sobrepasa el tama\xf1o permitido":(null===(m=this.editarEmpleadoForm.get(o))||void 0===m?void 0:m.hasError("minlength"))?c="El campo no alcanza el minimo permitido":(null===(g=null===(p=this.editarEmpleadoForm.get(o))||void 0===p?void 0:p.errors)||void 0===g?void 0:g.email)&&(c="No es un email valido"),c}isValidField(o){let i=this.editarEmpleadoForm.get(o);return(null==i?void 0:i.touched)||(null==i?void 0:i.dirty)&&!(null==i?void 0:i.valid)}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(A.J),e.Y36(C.e),e.Y36(u.gz),e.Y36(x._W),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-editempleado"]],decls:66,vars:12,consts:[[1,"main-content"],[1,"container","mt-7"],[1,"row"],[1,"col-xl-9","m-auto","order-xl-1"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"pl-lg-4"],[1,"col-lg-4"],[1,"form-group","focused"],[1,"full-width-input"],["matInput","","formControlName","nombre","type","text","placeholder","Nombre del empleado",1,"form-control"],[4,"ngIf"],[1,"form-group"],["matInput","","formControlName","ape_pat","type","text","placeholder","Apellido Paterno",1,"form-control"],["matInput","","formControlName","ape_mat","type","text","placeholder","Apellido Materno",1,"form-control"],[1,"col-lg-6"],["matInput","","formControlName","correo","type","email","placeholder","correo",1,"form-control"],["matInput","","formControlName","celular","type","tel","placeholder","celular",1,"form-control"],[1,"col-lg-12"],["matInput","","formControlName","direccion","placeholder","direccion","rows","5",1,"form-control"],["required","",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["type","file",1,"mb-3",3,"change"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],[1,"col-xl-3","m-auto","order-xl-1"],[4,"ngIf","ngIfElse"],["viewImage",""],[3,"value"],["alt","Imagen no encontrada",1,"img-form",3,"src"],["alt","",1,"img-form",3,"src"]],template:function(o,i){if(1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"h3",8),e._uU(9,"Editar empleado"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"form",10),e.NdJ("ngSubmit",function(){return i.editarEmpleado()}),e.TgZ(12,"div",11),e.TgZ(13,"div",2),e.TgZ(14,"div",12),e.TgZ(15,"div",13),e.TgZ(16,"mat-form-field",14),e._UZ(17,"input",15),e.YNc(18,M,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",12),e.TgZ(20,"div",17),e.TgZ(21,"mat-form-field",14),e._UZ(22,"input",18),e.YNc(23,O,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",12),e.TgZ(25,"div",17),e.TgZ(26,"mat-form-field",14),e._UZ(27,"input",19),e.YNc(28,y,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",2),e.TgZ(30,"div",20),e.TgZ(31,"div",13),e.TgZ(32,"mat-form-field",14),e._UZ(33,"input",21),e.YNc(34,w,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",20),e.TgZ(36,"div",13),e.TgZ(37,"mat-form-field",14),e._UZ(38,"input",22),e.YNc(39,N,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",2),e.TgZ(41,"div",23),e.TgZ(42,"div",13),e.TgZ(43,"mat-form-field",14),e._UZ(44,"textarea",24),e.YNc(45,P,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",2),e.TgZ(47,"div",20),e.TgZ(48,"div",13),e.TgZ(49,"mat-form-field",14),e.TgZ(50,"mat-label"),e._uU(51,"Rol"),e.qZA(),e.TgZ(52,"mat-select",25),e.NdJ("valueChange",function(n){return i.selectedRol=n})("selectionChange",function(n){return i.changeRol(n.value)}),e.YNc(53,U,2,2,"mat-option",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(54,"div",20),e.TgZ(55,"div",13),e.TgZ(56,"input",27),e.NdJ("change",function(n){return i.onFileSelected(n)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",2),e.TgZ(58,"button",28),e._uU(59,"Editar empleado "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(60,"div",29),e.TgZ(61,"h2"),e._uU(62,"Imagen actual"),e.qZA(),e.YNc(63,J,2,1,"ng-container",30),e.YNc(64,V,1,1,"ng-template",null,31,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const l=e.MAs(65);e.xp6(11),e.Q6J("formGroup",i.editarEmpleadoForm),e.xp6(7),e.Q6J("ngIf",i.isValidField("nombre")),e.xp6(5),e.Q6J("ngIf",i.isValidField("ape_pat")),e.xp6(5),e.Q6J("ngIf",i.isValidField("ape_mat")),e.xp6(6),e.Q6J("ngIf",i.isValidField("correo")),e.xp6(5),e.Q6J("ngIf",i.isValidField("celular")),e.xp6(6),e.Q6J("ngIf",i.isValidField("direccion")),e.xp6(7),e.Q6J("value",i.selectedRol),e.xp6(1),e.Q6J("ngForOf",i.roles),e.xp6(5),e.Q6J("disabled",i.editarEmpleadoForm.invalid),e.xp6(5),e.Q6J("ngIf",null==i.url)("ngIfElse",l)}},directives:[r._Y,r.JL,r.sg,f.KE,b.Nt,r.Fj,r.JJ,r.u,h.O5,f.hX,q.gD,h.sg,F.lW,f.TO,I.ey],styles:[".editpaquete-form[_ngcontent-%COMP%]{padding:4rem 1rem}mat-card[_ngcontent-%COMP%]{max-width:300px;margin:2rem auto;text-align:center;height:350px}.full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%}.separator[_ngcontent-%COMP%]{margin-bottom:2rem}.card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;border:1px solid rgba(0,0,0,.05);border-radius:.375rem;background-color:#fff;background-clip:border-box}.card[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{margin-right:0;margin-left:0}.card-body[_ngcontent-%COMP%]{padding:1.5rem;flex:1 1 auto}.bg-secondary[_ngcontent-%COMP%]{background-color:#f7fafc!important}a.bg-secondary[_ngcontent-%COMP%]:hover, a.bg-secondary[_ngcontent-%COMP%]:focus, button.bg-secondary[_ngcontent-%COMP%]:hover, button.bg-secondary[_ngcontent-%COMP%]:focus{background-color:#d2e3ee!important}.mt-7[_ngcontent-%COMP%]{margin-top:6rem!important}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%], .h6[_ngcontent-%COMP%]{font-family:inherit;font-weight:600;line-height:1.5;margin-bottom:.5rem;color:#32325d}h2[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%]{font-size:1.25rem}h3[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%]{font-size:1.0625rem}.img-form[_ngcontent-%COMP%]{width:130%;max-width:400px}"]}),t})()}];let Q=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.Bz.forChild(S)],u.Bz]}),t})();var Y=a(9731);let R=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[h.ez,Q,Y.q,r.u5,r.UX]]}),t})()}}]);