"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[869],{1869:(Ze,C,d)=>{d.r(C),d.d(C,{PaquetesModule:()=>he});var p=d(8583),f=d(4655),T=d(5514),P=d(6823),a=d(3679),x=d(9765),A=d(5319),M=d(6782),e=d(7716),b=d(6589),F=d(9344),I=d(1645),w=d(8836),O=d(8060),v=d(8295),N=d(9983),U=d(7441),E=d(1095),y=d(2458);function V(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("nombre")," ")}}function S(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("precio")," ")}}function Q(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("descripcion")," ")}}function Y(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("hrs_Video")," ")}}function j(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("no_Fotos_Dig")," ")}}function D(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("no_Fotos_Fis")," ")}}function k(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("no_Fotos_Enm")," ")}}function L(i,n){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij(" ",t.nombre," ")}}function $(i,n){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij(" ",t.nombre," ")}}function H(i,n){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij(" ",t.nombre," ")}}function z(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"img",35),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imageSrc,e.LSH)}}function B(i,n){if(1&i&&e._UZ(0,"img",36),2&i){const t=e.oxw();e.Q6J("src",t.url,e.LSH)}}let R=(()=>{class i{constructor(t,o,s,r,g,l){this.paqueteService=t,this.toastr=o,this.router=s,this.marcoService=r,this.tamanoService=g,this.authService=l,this.classes="row justify-content-md-center align-items-center",this.imageSrc="assets/img/image-not-found.png",this.destroy$=new x.xQ,this.user=null,this.subscription=new A.w,this.selectedFile=null,this.selectedTamano="",this.tamanos=[],this.selectedTipoPaquete="",this.tipo_paqutes=[{id:1,nombre:"Evento social",descripcion:"Fiesta de despedida del aviles del tec :c no paso integrador"},{id:2,nombre:"Sesion fotografica",descripcion:"Sesion de fotos de furros"}],this.selectedMarco="",this.marcos=null,this.agregarPaqueteForm=new a.cw({nombre:new a.NI("",[a.kI.required,a.kI.maxLength(50)]),descripcion:new a.NI("",[a.kI.required,a.kI.maxLength(100)]),hrs_Video:new a.NI("",[a.kI.maxLength(10)]),no_Fotos_Dig:new a.NI(0,[a.kI.required]),no_Fotos_Fis:new a.NI(0,[a.kI.required]),no_Fotos_Enm:new a.NI(0,[a.kI.required]),marco_id:new a.NI("",[a.kI.required]),tamano_id:new a.NI("",[a.kI.required]),precio:new a.NI("",[a.kI.required]),tipo_paquete_id:new a.NI("",[a.kI.required]),file:new a.NI})}ngOnInit(){this.getMarcos()}ngOnDestroy(){this.subscription.unsubscribe(),this.destroy$.next({}),this.destroy$.complete()}agregarPaquetes(){var t,o,s,r,g,l,c,_,h,q,Z;this.getUser();var u=new FormData;u.append("nombre",null===(t=this.agregarPaqueteForm.get("nombre"))||void 0===t?void 0:t.value),u.append("descripcion",null===(o=this.agregarPaqueteForm.get("descripcion"))||void 0===o?void 0:o.value),u.append("hrs_Video",null===(s=this.agregarPaqueteForm.get("hrs_Video"))||void 0===s?void 0:s.value),u.append("no_Fotos_Dig",null===(r=this.agregarPaqueteForm.get("no_Fotos_Dig"))||void 0===r?void 0:r.value),u.append("no_Fotos_Fis",null===(g=this.agregarPaqueteForm.get("no_Fotos_Fis"))||void 0===g?void 0:g.value),u.append("no_Fotos_Enm",null===(l=this.agregarPaqueteForm.get("no_Fotos_Enm"))||void 0===l?void 0:l.value),u.append("marco_id",null===(c=this.agregarPaqueteForm.get("marco_id"))||void 0===c?void 0:c.value),u.append("tamano_id",null===(_=this.agregarPaqueteForm.get("tamano_id"))||void 0===_?void 0:_.value),u.append("precio",null===(h=this.agregarPaqueteForm.get("precio"))||void 0===h?void 0:h.value),u.append("tipo_paquete_id",null===(q=this.agregarPaqueteForm.get("tipo_paquete_id"))||void 0===q?void 0:q.value),u.append("usuario_registro_id",this.user.id),u.append("file",null===(Z=this.agregarPaqueteForm.get("file"))||void 0===Z?void 0:Z.value),this.paqueteService.savePaquete(u).subscribe(m=>{m&&(this.toastr.success("El paquete fue agregado exitosamente","Paquete agregado",{positionClass:"toast-bottom-right"}),this.router.navigate(["/paquetes"]))})}getUser(){this.user=this.authService.getUser(),null==this.user&&this.subscription.add(this.authService.user$.pipe((0,M.R)(this.destroy$)).subscribe(t=>{t&&(this.user=t)}))}changeTamano(t){this.tamanos.forEach(o=>{o.nombre==t&&this.agregarPaqueteForm.controls.tamano_id.setValue(o.id)})}getTamanos(){this.subscription.add(this.tamanoService.getTamanos().subscribe(t=>{this.tamanos=t}))}changeTipoPaquete(t){console.log(t),this.tipo_paqutes.forEach(o=>{o.nombre==t&&this.agregarPaqueteForm.controls.tipo_paquete_id.setValue(o.id),"Evento social"==t&&(this.agregarPaqueteForm.controls.marco_id.setValue(1),this.selectedMarco="Sin Marco")})}changeMarco(t){this.marcos.forEach(o=>{o.nombre==t&&this.agregarPaqueteForm.controls.marco_id.setValue(o.id),"Sin Marco"!=t&&(this.agregarPaqueteForm.controls.tipo_paquete_id.setValue(2),this.selectedTipoPaquete="Sesion fotografica")})}getMarcos(){this.marcoService.getMarcos().subscribe(t=>{this.marcos=t})}onFileSelected(t){var o;this.agregarPaqueteForm.patchValue({file:t.target.files[0]}),null===(o=this.agregarPaqueteForm.get("file"))||void 0===o||o.updateValueAndValidity();var r=new FileReader;r.readAsDataURL(t.target.files[0]),r.onload=g=>{this.url=r.result}}getErrorMessage(t){var o,s,r;let g="";return(null===(s=null===(o=this.agregarPaqueteForm.get(t))||void 0===o?void 0:o.errors)||void 0===s?void 0:s.required)?g="El campo no puede estar vacio":(null===(r=this.agregarPaqueteForm.get(t))||void 0===r?void 0:r.hasError("maxlength"))&&(g="El campo sobrepasa el tama\xf1o permitido"),g}isValidField(t){let o=this.agregarPaqueteForm.get(t);return(null==o?void 0:o.touched)||(null==o?void 0:o.dirty)&&!(null==o?void 0:o.valid)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.q),e.Y36(F._W),e.Y36(f.F0),e.Y36(I.T),e.Y36(w.e),e.Y36(O.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-agregar"]],hostVars:2,hostBindings:function(t,o){2&t&&e.Tol(o.classes)},decls:86,vars:17,consts:[[1,"main-content"],[1,"container","mt-7"],[1,"row"],[1,"col-md-9","m-auto","order-xl-1"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"pl-lg-4"],[1,"col-lg-6"],[1,"form-group","focused"],[1,"full-width-input"],["matInput","","formControlName","nombre","type","text","placeholder","Nombre del paquete",1,"form-control"],[4,"ngIf"],[1,"form-group"],["matInput","","formControlName","precio","type","number","placeholder","Precio",1,"form-control"],[1,"col-lg-12"],["matInput","","formControlName","descripcion","placeholder","Descripcion del paquete","rows","5",1,"form-control"],[1,"col-lg-3"],["matInput","","formControlName","hrs_Video","type","text","placeholder","Horas de video",1,"form-control"],["matInput","","formControlName","no_Fotos_Dig","type","number","placeholder","Numero de fotos digitales",1,"form-control"],["matInput","","formControlName","no_Fotos_Fis","type","number","placeholder","Numero de fotos fisicas",1,"form-control"],["matInput","","formControlName","no_Fotos_Enm","type","number","placeholder","Numero de fotos enmarcadas",1,"form-control"],[1,"col-lg-4"],["required","",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["type","file",1,"mb-3",3,"change"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],[1,"col-xl-3","m-auto","order-xl-1"],[4,"ngIf","ngIfElse"],["viewImage",""],[3,"value"],["alt","Imagen no encontrada",1,"img-form",3,"src"],["alt","",1,"img-form",3,"src"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"h3",8),e._uU(9,"Agregar paquete"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"form",10),e.NdJ("ngSubmit",function(){return o.agregarPaquetes()}),e.TgZ(12,"div",11),e.TgZ(13,"div",2),e.TgZ(14,"div",12),e.TgZ(15,"div",13),e.TgZ(16,"mat-form-field",14),e._UZ(17,"input",15),e.YNc(18,V,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",12),e.TgZ(20,"div",17),e.TgZ(21,"mat-form-field",14),e._UZ(22,"input",18),e.YNc(23,S,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",2),e.TgZ(25,"div",19),e.TgZ(26,"div",13),e.TgZ(27,"mat-form-field",14),e._UZ(28,"textarea",20),e.YNc(29,Q,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",2),e.TgZ(31,"div",21),e.TgZ(32,"div",13),e.TgZ(33,"mat-form-field",14),e._UZ(34,"input",22),e.YNc(35,Y,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",21),e.TgZ(37,"div",13),e.TgZ(38,"mat-form-field",14),e._UZ(39,"input",23),e.YNc(40,j,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",21),e.TgZ(42,"div",13),e.TgZ(43,"mat-form-field",14),e._UZ(44,"input",24),e.YNc(45,D,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",21),e.TgZ(47,"div",13),e.TgZ(48,"mat-form-field",14),e._UZ(49,"input",25),e.YNc(50,k,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",2),e.TgZ(52,"div",26),e.TgZ(53,"div",13),e.TgZ(54,"mat-form-field",14),e.TgZ(55,"mat-label"),e._uU(56,"Marco"),e.qZA(),e.TgZ(57,"mat-select",27),e.NdJ("valueChange",function(r){return o.selectedMarco=r})("selectionChange",function(r){return o.changeMarco(r.value)}),e.YNc(58,L,2,2,"mat-option",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",26),e.TgZ(60,"div",13),e.TgZ(61,"mat-form-field",14),e.TgZ(62,"mat-label"),e._uU(63,"Tama\xf1o"),e.qZA(),e.TgZ(64,"mat-select",27),e.NdJ("valueChange",function(r){return o.selectedTamano=r})("selectionChange",function(r){return o.changeTamano(r.value)}),e.YNc(65,$,2,2,"mat-option",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"div",26),e.TgZ(67,"div",13),e.TgZ(68,"mat-form-field",14),e.TgZ(69,"mat-label"),e._uU(70,"Tipo paquete"),e.qZA(),e.TgZ(71,"mat-select",27),e.NdJ("valueChange",function(r){return o.selectedTipoPaquete=r})("selectionChange",function(r){return o.changeTipoPaquete(r.value)}),e.YNc(72,H,2,2,"mat-option",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"div",2),e.TgZ(74,"div",19),e.TgZ(75,"div",13),e.TgZ(76,"input",29),e.NdJ("change",function(r){return o.onFileSelected(r)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(77,"div",2),e.TgZ(78,"button",30),e._uU(79,"Agregar paquete "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(80,"div",31),e.TgZ(81,"h2"),e._uU(82,"Imagen actual"),e.qZA(),e.YNc(83,z,2,1,"ng-container",32),e.YNc(84,B,1,1,"ng-template",null,33,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const s=e.MAs(85);e.xp6(11),e.Q6J("formGroup",o.agregarPaqueteForm),e.xp6(7),e.Q6J("ngIf",o.isValidField("nombre")),e.xp6(5),e.Q6J("ngIf",o.isValidField("precio")),e.xp6(6),e.Q6J("ngIf",o.isValidField("descripcion")),e.xp6(6),e.Q6J("ngIf",o.isValidField("hrs_Video")),e.xp6(5),e.Q6J("ngIf",o.isValidField("no_Fotos_Dig")),e.xp6(5),e.Q6J("ngIf",o.isValidField("no_Fotos_Fis")),e.xp6(5),e.Q6J("ngIf",o.isValidField("no_Fotos_Enm")),e.xp6(7),e.Q6J("value",o.selectedMarco),e.xp6(1),e.Q6J("ngForOf",o.marcos),e.xp6(6),e.Q6J("value",o.selectedTamano),e.xp6(1),e.Q6J("ngForOf",o.tamanos),e.xp6(6),e.Q6J("value",o.selectedTipoPaquete),e.xp6(1),e.Q6J("ngForOf",o.tipo_paqutes),e.xp6(6),e.Q6J("disabled",o.agregarPaqueteForm.invalid),e.xp6(5),e.Q6J("ngIf",null==o.url)("ngIfElse",s)}},directives:[a._Y,a.JL,a.sg,v.KE,N.Nt,a.Fj,a.JJ,a.u,p.O5,a.wV,v.hX,U.gD,p.sg,E.lW,v.TO,y.ey],styles:[".full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%}.separator[_ngcontent-%COMP%]{margin-bottom:2rem}.card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;border:1px solid rgba(0,0,0,.05);border-radius:.375rem;background-color:#fff;background-clip:border-box}.card[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{margin-right:0;margin-left:0}.card-body[_ngcontent-%COMP%]{padding:1.5rem;flex:1 1 auto}.bg-secondary[_ngcontent-%COMP%]{background-color:#f7fafc!important}a.bg-secondary[_ngcontent-%COMP%]:hover, a.bg-secondary[_ngcontent-%COMP%]:focus, button.bg-secondary[_ngcontent-%COMP%]:hover, button.bg-secondary[_ngcontent-%COMP%]:focus{background-color:#d2e3ee!important}.mt-7[_ngcontent-%COMP%]{margin-top:6rem!important}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%], .h6[_ngcontent-%COMP%]{font-family:inherit;font-weight:600;line-height:1.5;margin-bottom:.5rem;color:#32325d}h2[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%]{font-size:1.25rem}h3[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%]{font-size:1.0625rem}.img-form[_ngcontent-%COMP%]{width:130%;max-width:400px}"]}),i})();var J=d(2340);function W(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("nombre")," ")}}function X(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("precio")," ")}}function G(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("descripcion")," ")}}function K(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("hrs_Video")," ")}}function ee(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("no_Fotos_Dig")," ")}}function te(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("no_Fotos_Fis")," ")}}function oe(i,n){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("no_Fotos_Enm")," ")}}function ie(i,n){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij(" ",t.nombre," ")}}function ae(i,n){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij(" ",t.nombre," ")}}function re(i,n){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij(" ",t.nombre," ")}}function ne(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"img",35),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imageSrc,e.LSH)}}function se(i,n){if(1&i&&e._UZ(0,"img",36),2&i){const t=e.oxw();e.Q6J("src",t.urlImage,e.LSH)}}let de=(()=>{class i{constructor(t,o,s,r,g,l,c){this.authService=t,this.paqueteService=o,this.marcoService=s,this.tamanoService=r,this.rutaActiva=g,this.toastr=l,this.router=c,this.url=J.N.url,this.newFile=null,this.imageSrc="assets/img/image-not-found.png",this.destroy$=new x.xQ,this.user=null,this.subscription=new A.w,this.selectedTamano="",this.tamanos=[],this.selectedTipoPaquete="",this.tipo_paqutes=[{id:1,nombre:"Evento social",descripcion:"Fiesta de despedida del aviles del tec :c no paso integrador"},{id:2,nombre:"Sesion fotografica",descripcion:"Sesion de fotos de furros"}],this.selectedMarco="",this.marcos=null,this.isDisabled=!0,this.id="",this.editarPaqueteForm=new a.cw({id:new a.NI({value:"",disabled:!0},a.kI.required),nombre:new a.NI("",[a.kI.required,a.kI.maxLength(50)]),descripcion:new a.NI("",[a.kI.required,a.kI.maxLength(100)]),hrs_Video:new a.NI("",[a.kI.maxLength(10)]),no_Fotos_Dig:new a.NI(0,[a.kI.required]),no_Fotos_Fis:new a.NI(0,[a.kI.required]),no_Fotos_Enm:new a.NI(0,[a.kI.required]),marco_id:new a.NI(0,[a.kI.required]),tamano_id:new a.NI(0,[a.kI.required]),tipo_paquete_id:new a.NI("",[a.kI.required]),precio:new a.NI("",[a.kI.required]),usuario_modificacion_id:new a.NI(a.kI.required),file:new a.NI})}ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete(),this.subscription.unsubscribe()}ngOnInit(){this.getUser(),this.getMarco(),this.id=this.rutaActiva.snapshot.params.id,this.paqueteService.getPaquete(this.id).subscribe(t=>{this.urlImage=this.url+t.url_imagen,t?(this.editarPaqueteForm.controls.id.setValue(t.id),this.editarPaqueteForm.controls.nombre.setValue(t.nombre),this.editarPaqueteForm.controls.descripcion.setValue(t.descripcion),this.editarPaqueteForm.controls.hrs_Video.setValue(t.hrs_Video),this.editarPaqueteForm.controls.no_Fotos_Dig.setValue(t.no_Fotos_Dig),this.editarPaqueteForm.controls.no_Fotos_Fis.setValue(t.no_Fotos_Fis),this.editarPaqueteForm.controls.no_Fotos_Enm.setValue(t.no_Fotos_Enm),this.editarPaqueteForm.controls.marco_id.setValue(t.marco_id),this.editarPaqueteForm.controls.tamano_id.setValue(t.tamano_id),this.editarPaqueteForm.controls.precio.setValue(t.precio),this.editarPaqueteForm.controls.tipo_paquete_id.setValue(t.tipo_paquete_id),this.editarPaqueteForm.controls.usuario_modificacion_id.setValue(this.user.id),console.log(t),this.tamanos.forEach(o=>{o.id==t.tamano_id&&(this.selectedTamano=o.nombre)}),this.marcos.forEach(o=>{o.id==t.marco_id&&(this.selectedMarco=o.nombre)}),this.tipo_paqutes.forEach(o=>{o.id==t.tipo_paquete_id&&(this.selectedTipoPaquete=o.nombre)})):this.router.navigate(["/paquetes"])})}editarPaquetes(){var t,o,s,r,g,l,c,_,h,q,Z,u,m=new FormData;m.append("nombre",null===(t=this.editarPaqueteForm.get("nombre"))||void 0===t?void 0:t.value),m.append("descripcion",null===(o=this.editarPaqueteForm.get("descripcion"))||void 0===o?void 0:o.value),m.append("hrs_Video",null===(s=this.editarPaqueteForm.get("hrs_Video"))||void 0===s?void 0:s.value),m.append("no_Fotos_Dig",null===(r=this.editarPaqueteForm.get("no_Fotos_Dig"))||void 0===r?void 0:r.value),m.append("no_Fotos_Fis",null===(g=this.editarPaqueteForm.get("no_Fotos_Fis"))||void 0===g?void 0:g.value),m.append("no_Fotos_Enm",null===(l=this.editarPaqueteForm.get("no_Fotos_Enm"))||void 0===l?void 0:l.value),m.append("marco_id",null===(c=this.editarPaqueteForm.get("marco_id"))||void 0===c?void 0:c.value),m.append("tamano_id",null===(_=this.editarPaqueteForm.get("tamano_id"))||void 0===_?void 0:_.value),m.append("precio",null===(h=this.editarPaqueteForm.get("precio"))||void 0===h?void 0:h.value),m.append("tipo_paquete_id",null===(q=this.editarPaqueteForm.get("tipo_paquete_id"))||void 0===q?void 0:q.value),m.append("usuario_modificacion_id",null===(Z=this.editarPaqueteForm.get("usuario_modificacion_id"))||void 0===Z?void 0:Z.value),m.append("file",null===(u=this.editarPaqueteForm.get("file"))||void 0===u?void 0:u.value),this.paqueteService.updatePaquete(this.id,m).subscribe(qe=>{qe&&(this.toastr.success("El paquete fue actualizado exitosamente","Paquete actualizado",{positionClass:"toast-bottom-right"}),this.router.navigate(["/paquetes"]))})}getMarco(){this.marcoService.getMarcos().subscribe(t=>{this.marcos=t})}getTamanos(){this.subscription.add(this.tamanoService.getTamanos().subscribe(t=>{this.tamanos=t}))}getUser(){this.user=this.authService.getUser(),null==this.user&&this.subscription.add(this.authService.user$.pipe((0,M.R)(this.destroy$)).subscribe(t=>{t&&(this.user=t)}))}onFileSelected(t){var o;this.editarPaqueteForm.patchValue({file:t.target.files[0]}),null===(o=this.editarPaqueteForm.get("file"))||void 0===o||o.updateValueAndValidity();var r=new FileReader;r.readAsDataURL(t.target.files[0]),r.onload=g=>{this.urlImage=r.result}}changeTamano(t){this.tamanos.forEach(o=>{o.nombre==t&&this.editarPaqueteForm.controls.tamano_id.setValue(o.id)})}changeTipoPaquete(t){console.log(t),this.tipo_paqutes.forEach(o=>{o.nombre==t&&this.editarPaqueteForm.controls.tipo_paquete_id.setValue(o.id),"Evento social"==t&&(this.editarPaqueteForm.controls.marco_id.setValue(1),this.selectedMarco="Sin Marco")})}changeMarco(t){this.marcos.forEach(o=>{o.nombre==t&&this.editarPaqueteForm.controls.marco_id.setValue(o.id),"Sin Marco"!=t&&(this.editarPaqueteForm.controls.tipo_paquete_id.setValue(2),this.selectedTipoPaquete="Sesion fotografica")})}getErrorMessage(t){var o,s,r;let g="";return(null===(s=null===(o=this.editarPaqueteForm.get(t))||void 0===o?void 0:o.errors)||void 0===s?void 0:s.required)?g="El campo no puede estar vacio":(null===(r=this.editarPaqueteForm.get(t))||void 0===r?void 0:r.hasError("maxlength"))&&(g="El campo sobrepasa el tama\xf1o permitido"),g}isValidField(t){let o=this.editarPaqueteForm.get(t);return(null==o?void 0:o.touched)||(null==o?void 0:o.dirty)&&!(null==o?void 0:o.valid)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(O.e),e.Y36(b.q),e.Y36(I.T),e.Y36(w.e),e.Y36(f.gz),e.Y36(F._W),e.Y36(f.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-editar"]],decls:86,vars:17,consts:[[1,"main-content"],[1,"container","mt-7"],[1,"row"],[1,"col-md-9","m-auto","order-xl-1"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"pl-lg-4"],[1,"col-lg-6"],[1,"form-group","focused"],[1,"full-width-input"],["matInput","","formControlName","nombre","type","text","placeholder","Nombre del paquete",1,"form-control"],[4,"ngIf"],[1,"form-group"],["matInput","","formControlName","precio","type","number","placeholder","Precio",1,"form-control"],[1,"col-lg-12"],["matInput","","formControlName","descripcion","placeholder","Descripcion del paquete","rows","5",1,"form-control"],[1,"col-lg-3"],["matInput","","formControlName","hrs_Video","type","text","placeholder","Horas de video",1,"form-control"],["matInput","","formControlName","no_Fotos_Dig","type","number","placeholder","Numero de fotos digitales",1,"form-control"],["matInput","","formControlName","no_Fotos_Fis","type","number","placeholder","Numero de fotos fisicas",1,"form-control"],["matInput","","formControlName","no_Fotos_Enm","type","number","placeholder","Numero de fotos enmarcadas",1,"form-control"],[1,"col-lg-4"],["required","",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["type","file",1,"mb-3",3,"change"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],[1,"col-xl-3","m-auto","order-xl-1"],[4,"ngIf","ngIfElse"],["viewImage",""],[3,"value"],["alt","Imagen no encontrada",1,"img-form",3,"src"],["alt","",1,"img-form",3,"src"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"h3",8),e._uU(9,"Editar paquete"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"form",10),e.NdJ("ngSubmit",function(){return o.editarPaquetes()}),e.TgZ(12,"div",11),e.TgZ(13,"div",2),e.TgZ(14,"div",12),e.TgZ(15,"div",13),e.TgZ(16,"mat-form-field",14),e._UZ(17,"input",15),e.YNc(18,W,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",12),e.TgZ(20,"div",17),e.TgZ(21,"mat-form-field",14),e._UZ(22,"input",18),e.YNc(23,X,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",2),e.TgZ(25,"div",19),e.TgZ(26,"div",13),e.TgZ(27,"mat-form-field",14),e._UZ(28,"textarea",20),e.YNc(29,G,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",2),e.TgZ(31,"div",21),e.TgZ(32,"div",13),e.TgZ(33,"mat-form-field",14),e._UZ(34,"input",22),e.YNc(35,K,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",21),e.TgZ(37,"div",13),e.TgZ(38,"mat-form-field",14),e._UZ(39,"input",23),e.YNc(40,ee,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",21),e.TgZ(42,"div",13),e.TgZ(43,"mat-form-field",14),e._UZ(44,"input",24),e.YNc(45,te,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",21),e.TgZ(47,"div",13),e.TgZ(48,"mat-form-field",14),e._UZ(49,"input",25),e.YNc(50,oe,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",2),e.TgZ(52,"div",26),e.TgZ(53,"div",13),e.TgZ(54,"mat-form-field",14),e.TgZ(55,"mat-label"),e._uU(56,"Marco"),e.qZA(),e.TgZ(57,"mat-select",27),e.NdJ("valueChange",function(r){return o.selectedMarco=r})("selectionChange",function(r){return o.changeMarco(r.value)}),e.YNc(58,ie,2,2,"mat-option",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",26),e.TgZ(60,"div",13),e.TgZ(61,"mat-form-field",14),e.TgZ(62,"mat-label"),e._uU(63,"Tama\xf1o"),e.qZA(),e.TgZ(64,"mat-select",27),e.NdJ("valueChange",function(r){return o.selectedTamano=r})("selectionChange",function(r){return o.changeTamano(r.value)}),e.YNc(65,ae,2,2,"mat-option",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"div",26),e.TgZ(67,"div",13),e.TgZ(68,"mat-form-field",14),e.TgZ(69,"mat-label"),e._uU(70,"Tipo paquete"),e.qZA(),e.TgZ(71,"mat-select",27),e.NdJ("valueChange",function(r){return o.selectedTipoPaquete=r})("selectionChange",function(r){return o.changeTipoPaquete(r.value)}),e.YNc(72,re,2,2,"mat-option",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"div",2),e.TgZ(74,"div",19),e.TgZ(75,"div",13),e.TgZ(76,"input",29),e.NdJ("change",function(r){return o.onFileSelected(r)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(77,"div",2),e.TgZ(78,"button",30),e._uU(79,"Editar Paquete"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(80,"div",31),e.TgZ(81,"h2"),e._uU(82,"Imagen actual"),e.qZA(),e.YNc(83,ne,2,1,"ng-container",32),e.YNc(84,se,1,1,"ng-template",null,33,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const s=e.MAs(85);e.xp6(11),e.Q6J("formGroup",o.editarPaqueteForm),e.xp6(7),e.Q6J("ngIf",o.isValidField("nombre")),e.xp6(5),e.Q6J("ngIf",o.isValidField("precio")),e.xp6(6),e.Q6J("ngIf",o.isValidField("descripcion")),e.xp6(6),e.Q6J("ngIf",o.isValidField("hrs_Video")),e.xp6(5),e.Q6J("ngIf",o.isValidField("no_Fotos_Dig")),e.xp6(5),e.Q6J("ngIf",o.isValidField("no_Fotos_Fis")),e.xp6(5),e.Q6J("ngIf",o.isValidField("no_Fotos_Enm")),e.xp6(7),e.Q6J("value",o.selectedMarco),e.xp6(1),e.Q6J("ngForOf",o.marcos),e.xp6(6),e.Q6J("value",o.selectedTamano),e.xp6(1),e.Q6J("ngForOf",o.tamanos),e.xp6(6),e.Q6J("value",o.selectedTipoPaquete),e.xp6(1),e.Q6J("ngForOf",o.tipo_paqutes),e.xp6(6),e.Q6J("disabled",o.editarPaqueteForm.invalid),e.xp6(5),e.Q6J("ngIf",null==o.urlImage)("ngIfElse",s)}},directives:[a._Y,a.JL,a.sg,v.KE,N.Nt,a.Fj,a.JJ,a.u,p.O5,a.wV,v.hX,U.gD,p.sg,E.lW,v.TO,y.ey],styles:[".editpaquete-form[_ngcontent-%COMP%]{padding:4rem 1rem}mat-card[_ngcontent-%COMP%]{max-width:300px;margin:2rem auto;text-align:center;height:350px}.full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%}.separator[_ngcontent-%COMP%]{margin-bottom:2rem}input[_ngcontent-%COMP%]{margin:0!important}.card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;border:1px solid rgba(0,0,0,.05);border-radius:.375rem;background-color:#fff;background-clip:border-box}.card[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{margin-right:0;margin-left:0}.card-body[_ngcontent-%COMP%]{padding:1.5rem;flex:1 1 auto}.bg-secondary[_ngcontent-%COMP%]{background-color:#f7fafc!important}a.bg-secondary[_ngcontent-%COMP%]:hover, a.bg-secondary[_ngcontent-%COMP%]:focus, button.bg-secondary[_ngcontent-%COMP%]:hover, button.bg-secondary[_ngcontent-%COMP%]:focus{background-color:#d2e3ee!important}.mt-7[_ngcontent-%COMP%]{margin-top:6rem!important}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%], .h6[_ngcontent-%COMP%]{font-family:inherit;font-weight:600;line-height:1.5;margin-bottom:.5rem;color:#32325d}h2[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%]{font-size:1.25rem}h3[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%]{font-size:1.0625rem}.img-form[_ngcontent-%COMP%]{width:130%;max-width:400px}"]}),i})();var ge=d(6627);function ue(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"img",15),e.BQk()),2&i){const t=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("src",o.url+t.url_imagen,e.LSH)}}function me(i,n){if(1&i&&e._UZ(0,"img",16),2&i){const t=e.oxw(2);e.Q6J("src",t.imageSrcDefault,e.LSH)}}function le(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"th",8),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td",9),e.YNc(24,ue,2,1,"ng-container",10),e.YNc(25,me,1,1,"ng-template",null,11,e.W1O),e.qZA(),e.TgZ(27,"td",12),e.TgZ(28,"a",13),e.TgZ(29,"mat-icon"),e._uU(30,"edit"),e.qZA(),e.qZA(),e.TgZ(31,"a",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().eliminarPaquete(r.id)}),e.TgZ(32,"mat-icon"),e._uU(33,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=n.$implicit,o=e.MAs(26);e.xp6(2),e.Oqu(t.id),e.xp6(2),e.hij(" ",t.nombre,""),e.xp6(2),e.hij(" ",t.descripcion,""),e.xp6(2),e.hij(" ",t.hrs_Video,""),e.xp6(2),e.hij(" ",t.no_Fotos_Dig,""),e.xp6(2),e.hij(" ",t.no_Fotos_Fis,""),e.xp6(2),e.hij(" ",t.no_Fotos_Enm,""),e.xp6(2),e.hij(" ",t.marco_nombre,""),e.xp6(2),e.hij(" ",t.tamano_nombre,""),e.xp6(2),e.hij(" ",t.tipo_paquete_nombre,""),e.xp6(2),e.hij(" ",t.precio,""),e.xp6(2),e.Q6J("ngIf",null!=t.url_imagen)("ngIfElse",o),e.xp6(4),e.MGl("routerLink","/administrador/paquetes/",t.id,"")}}const pe=[{path:"",children:[{path:"agregar",component:R,canActivate:[P.X,T.D]},{path:":id",component:de,canActivate:[P.X,T.D]},{path:"",component:(()=>{class i{constructor(t,o){this.paquetesService=t,this.toastr=o,this.url=J.N.url,this.imageSrcDefault="assets/img/image-not-found.png",this.subscription=new A.w,this.paquetes=[]}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.getPaquetes()}eliminarPaquete(t){this.subscription.add(this.paquetesService.deletePaquete(t).subscribe(o=>{this.toastr.success("El paquete fue eliminado exitosamente","Paquete eliminado",{positionClass:"toast-bottom-right"}),this.getPaquetes()}))}getPaquetes(){this.paquetesService.getPaquetes().subscribe(t=>{this.paquetes=t})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.q),e.Y36(F._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-listado"]],decls:38,vars:1,consts:[[1,"container","mt-4"],[1,"card"],[1,"card-body"],[1,"h3"],["routerLink","/administrador/paquetes/agregar",1,"btn","btn-dark","btn-lg","float-right"],[1,"table","table-striped","mt-4"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[2,"width","15%"],[4,"ngIf","ngIfElse"],["fotoDefault",""],[2,"display","flex","flex-direction","row"],[1,"nav-link",3,"routerLink"],[1,"nav-link",3,"click"],[1,"img-table",3,"src"],["alt","Imagen no encontrada",1,"img-table",3,"src"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"span",3),e._uU(4,"Lista de paquetes"),e.qZA(),e.TgZ(5,"a",4),e._uU(6,"Agregar"),e.qZA(),e.TgZ(7,"table",5),e.TgZ(8,"thead"),e.TgZ(9,"tr"),e.TgZ(10,"th",6),e._uU(11,"Id"),e.qZA(),e.TgZ(12,"th",6),e._uU(13,"Nombre"),e.qZA(),e.TgZ(14,"th",6),e._uU(15,"Descripcion"),e.qZA(),e.TgZ(16,"th",6),e._uU(17,"Horas de video"),e.qZA(),e.TgZ(18,"th",6),e._uU(19,"Fotos digitales"),e.qZA(),e.TgZ(20,"th",6),e._uU(21,"Fotos fisicas"),e.qZA(),e.TgZ(22,"th",6),e._uU(23,"Fotos enmarcadas"),e.qZA(),e.TgZ(24,"th",6),e._uU(25,"Marco"),e.qZA(),e.TgZ(26,"th",6),e._uU(27,"Tama\xf1o"),e.qZA(),e.TgZ(28,"th",6),e._uU(29,"Tipo de paquete"),e.qZA(),e.TgZ(30,"th",6),e._uU(31,"Precio"),e.qZA(),e.TgZ(32,"th",6),e._uU(33,"Imagen"),e.qZA(),e.TgZ(34,"th",6),e._uU(35,"Opciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"tbody"),e.YNc(37,le,34,14,"tr",7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(37),e.Q6J("ngForOf",o.paquetes))},directives:[f.yS,p.sg,p.O5,ge.Hw],styles:["table[_ngcontent-%COMP%]{width:80%;margin:auto}.mat-column-id[_ngcontent-%COMP%]{width:32px;border-right:1px solid currentColor;padding-right:24px;text-align:center}.mat-column-userId[_ngcontent-%COMP%]{width:32px;border-right:1px solid currentColor;padding-right:24px;text-align:center}.mat-column-title[_ngcontent-%COMP%]{padding-left:16px;font-size:20px}.mat-column-body[_ngcontent-%COMP%]{font-style:italic}.mat-column-demo-symbol[_ngcontent-%COMP%]{width:32px;text-align:center;font-weight:bold}.container-btn[_ngcontent-%COMP%]{width:80%;margin:auto;text-align:right}.img-table[_ngcontent-%COMP%]{width:100%;max-width:100px}"]}),i})(),canActivate:[P.X,T.D]}]}];let _e=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[f.Bz.forChild(pe)],f.Bz]}),i})(),he=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,_e]]}),i})()}}]);