"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[939],{7939:(W,T,d)=>{d.r(T),d.d(T,{EditpaqueteModule:()=>B});var p=d(8583),c=d(4655),n=d(3679),F=d(6782),P=d(9765),C=d(5319),e=d(7716),A=d(8060),b=d(6589),M=d(1645),E=d(9344),g=d(8295),x=d(9983),w=d(7441),I=d(1095),O=d(2458);function N(i,a){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("nombre")," ")}}function V(i,a){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("precio")," ")}}function y(i,a){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("descripcion")," ")}}function J(i,a){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("hrs_Video")," ")}}function U(i,a){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("no_Fotos_Dig")," ")}}function S(i,a){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("no_Fotos_Fis")," ")}}function Q(i,a){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("no_Fotos_Enm")," ")}}function Y(i,a){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij(" ",t.nombre," ")}}function j(i,a){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij(" ",t.nombre," ")}}function D(i,a){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij(" ",t.nombre," ")}}function k(i,a){if(1&i&&(e.ynx(0),e._UZ(1,"img",35),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imageSrc,e.LSH)}}function z(i,a){if(1&i&&e._UZ(0,"img",36),2&i){const t=e.oxw();e.Q6J("src",t.url,e.LSH)}}const $=[{path:"",component:(()=>{class i{constructor(t,o,s,r,m,l){this.authService=t,this.paqueteService=o,this.marcoService=s,this.rutaActiva=r,this.toastr=m,this.router=l,this.newFile=null,this.imageSrc="assets/img/image-not-found.png",this.destroy$=new P.xQ,this.user=null,this.subscription=new C.w,this.selectedTamano="",this.tamanos=[{id:1,nombre:"9 x 13"},{id:2,nombre:"13 x 18"},{id:3,nombre:"15 x 20"}],this.selectedTipoPaquete="",this.tipo_paqutes=[{id:1,nombre:"Evento social",descripcion:"Fiesta de despedida del aviles del tec :c no paso integrador"},{id:2,nombre:"Sesion fotografica",descripcion:"Sesion de fotos de furros"}],this.selectedMarco="",this.marcos=null,this.isDisabled=!0,this.id="",this.editarPaqueteForm=new n.cw({id:new n.NI({value:"",disabled:!0},n.kI.required),nombre:new n.NI("",[n.kI.required,n.kI.maxLength(50)]),descripcion:new n.NI("",[n.kI.required,n.kI.maxLength(100)]),hrs_Video:new n.NI("",[n.kI.maxLength(10)]),no_Fotos_Dig:new n.NI(0,[n.kI.required]),no_Fotos_Fis:new n.NI(0,[n.kI.required]),no_Fotos_Enm:new n.NI(0,[n.kI.required]),marco_id:new n.NI(0,[n.kI.required]),tamano_id:new n.NI(0,[n.kI.required]),tipo_paquete_id:new n.NI("",[n.kI.required]),precio:new n.NI("",[n.kI.required]),usuario_modificacion_id:new n.NI(n.kI.required),file:new n.NI})}ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete(),this.subscription.unsubscribe()}ngOnInit(){this.getUser(),this.getMarco(),this.id=this.rutaActiva.snapshot.params.id,this.paqueteService.getPaquete(this.id).subscribe(t=>{this.url="http://localhost:3000/"+t.url_imagen,t?(this.editarPaqueteForm.controls.id.setValue(t.id),this.editarPaqueteForm.controls.nombre.setValue(t.nombre),this.editarPaqueteForm.controls.descripcion.setValue(t.descripcion),this.editarPaqueteForm.controls.hrs_Video.setValue(t.hrs_Video),this.editarPaqueteForm.controls.no_Fotos_Dig.setValue(t.no_Fotos_Dig),this.editarPaqueteForm.controls.no_Fotos_Fis.setValue(t.no_Fotos_Fis),this.editarPaqueteForm.controls.no_Fotos_Enm.setValue(t.no_Fotos_Enm),this.editarPaqueteForm.controls.marco_id.setValue(t.marco_id),this.editarPaqueteForm.controls.tamano_id.setValue(t.tamano_id),this.editarPaqueteForm.controls.precio.setValue(t.precio),this.editarPaqueteForm.controls.tipo_paquete_id.setValue(t.tipo_paquete_id),this.editarPaqueteForm.controls.usuario_modificacion_id.setValue(this.user.id),console.log(t),this.tamanos.forEach(o=>{o.id==t.tamano_id&&(this.selectedTamano=o.nombre)}),this.marcos.forEach(o=>{o.id==t.marco_id&&(this.selectedMarco=o.nombre)}),this.tipo_paqutes.forEach(o=>{o.id==t.tipo_paquete_id&&(this.selectedTipoPaquete=o.nombre)})):this.router.navigate(["/paquetes"])})}editarPaquetes(){var t,o,s,r,m,l,h,_,f,q,v,Z,u=new FormData;u.append("nombre",null===(t=this.editarPaqueteForm.get("nombre"))||void 0===t?void 0:t.value),u.append("descripcion",null===(o=this.editarPaqueteForm.get("descripcion"))||void 0===o?void 0:o.value),u.append("hrs_Video",null===(s=this.editarPaqueteForm.get("hrs_Video"))||void 0===s?void 0:s.value),u.append("no_Fotos_Dig",null===(r=this.editarPaqueteForm.get("no_Fotos_Dig"))||void 0===r?void 0:r.value),u.append("no_Fotos_Fis",null===(m=this.editarPaqueteForm.get("no_Fotos_Fis"))||void 0===m?void 0:m.value),u.append("no_Fotos_Enm",null===(l=this.editarPaqueteForm.get("no_Fotos_Enm"))||void 0===l?void 0:l.value),u.append("marco_id",null===(h=this.editarPaqueteForm.get("marco_id"))||void 0===h?void 0:h.value),u.append("tamano_id",null===(_=this.editarPaqueteForm.get("tamano_id"))||void 0===_?void 0:_.value),u.append("precio",null===(f=this.editarPaqueteForm.get("precio"))||void 0===f?void 0:f.value),u.append("tipo_paquete_id",null===(q=this.editarPaqueteForm.get("tipo_paquete_id"))||void 0===q?void 0:q.value),u.append("usuario_modificacion_id",null===(v=this.editarPaqueteForm.get("usuario_modificacion_id"))||void 0===v?void 0:v.value),u.append("file",null===(Z=this.editarPaqueteForm.get("file"))||void 0===Z?void 0:Z.value),this.paqueteService.updatePaquete(this.id,u).subscribe(H=>{H&&(this.toastr.success("El paquete fue actualizado exitosamente","Paquete actualizado",{positionClass:"toast-bottom-right"}),this.router.navigate(["/paquetes"]))})}getMarco(){this.marcoService.getMarcos().subscribe(t=>{this.marcos=t})}getUser(){this.subscription.add(this.authService.user$.pipe((0,F.R)(this.destroy$)).subscribe(t=>{t&&(this.user=t)}))}onFileSelected(t){var o;this.editarPaqueteForm.patchValue({file:t.target.files[0]}),null===(o=this.editarPaqueteForm.get("file"))||void 0===o||o.updateValueAndValidity();var r=new FileReader;r.readAsDataURL(t.target.files[0]),r.onload=m=>{this.url=r.result}}changeTamano(t){this.tamanos.forEach(o=>{o.nombre==t&&this.editarPaqueteForm.controls.tamano_id.setValue(o.id)})}changeTipoPaquete(t){console.log(t),this.tipo_paqutes.forEach(o=>{o.nombre==t&&this.editarPaqueteForm.controls.tipo_paquete_id.setValue(o.id),"Evento social"==t&&(this.editarPaqueteForm.controls.marco_id.setValue(1),this.selectedMarco="Sin Marco")})}changeMarco(t){this.marcos.forEach(o=>{o.nombre==t&&this.editarPaqueteForm.controls.marco_id.setValue(o.id),"Sin Marco"!=t&&(this.editarPaqueteForm.controls.tipo_paquete_id.setValue(2),this.selectedTipoPaquete="Sesion fotografica")})}getErrorMessage(t){var o,s,r;let m="";return(null===(s=null===(o=this.editarPaqueteForm.get(t))||void 0===o?void 0:o.errors)||void 0===s?void 0:s.required)?m="El campo no puede estar vacio":(null===(r=this.editarPaqueteForm.get(t))||void 0===r?void 0:r.hasError("maxlength"))&&(m="El campo sobrepasa el tama\xf1o permitido"),m}isValidField(t){let o=this.editarPaqueteForm.get(t);return(null==o?void 0:o.touched)||(null==o?void 0:o.dirty)&&!(null==o?void 0:o.valid)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(A.e),e.Y36(b.q),e.Y36(M.T),e.Y36(c.gz),e.Y36(E._W),e.Y36(c.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-editpaquete"]],decls:86,vars:17,consts:[[1,"main-content"],[1,"container","mt-7"],[1,"row"],[1,"col-md-9","m-auto","order-xl-1"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"pl-lg-4"],[1,"col-lg-6"],[1,"form-group","focused"],[1,"full-width-input"],["matInput","","formControlName","nombre","type","text","placeholder","Nombre del paquete",1,"form-control"],[4,"ngIf"],[1,"form-group"],["matInput","","formControlName","precio","type","number","placeholder","Precio",1,"form-control"],[1,"col-lg-12"],["matInput","","formControlName","descripcion","placeholder","Descripcion del paquete","rows","5",1,"form-control"],[1,"col-lg-3"],["matInput","","formControlName","hrs_Video","type","text","placeholder","Horas de video",1,"form-control"],["matInput","","formControlName","no_Fotos_Dig","type","number","placeholder","Numero de fotos digitales",1,"form-control"],["matInput","","formControlName","no_Fotos_Fis","type","number","placeholder","Numero de fotos fisicas",1,"form-control"],["matInput","","formControlName","no_Fotos_Enm","type","number","placeholder","Numero de fotos enmarcadas",1,"form-control"],[1,"col-lg-4"],["required","",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["type","file",1,"mb-3",3,"change"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],[1,"col-xl-3","m-auto","order-xl-1"],[4,"ngIf","ngIfElse"],["viewImage",""],[3,"value"],["alt","Imagen no encontrada",1,"img-form",3,"src"],["alt","",1,"img-form",3,"src"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"h3",8),e._uU(9,"Editar paquete"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"form",10),e.NdJ("ngSubmit",function(){return o.editarPaquetes()}),e.TgZ(12,"div",11),e.TgZ(13,"div",2),e.TgZ(14,"div",12),e.TgZ(15,"div",13),e.TgZ(16,"mat-form-field",14),e._UZ(17,"input",15),e.YNc(18,N,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",12),e.TgZ(20,"div",17),e.TgZ(21,"mat-form-field",14),e._UZ(22,"input",18),e.YNc(23,V,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",2),e.TgZ(25,"div",19),e.TgZ(26,"div",13),e.TgZ(27,"mat-form-field",14),e._UZ(28,"textarea",20),e.YNc(29,y,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",2),e.TgZ(31,"div",21),e.TgZ(32,"div",13),e.TgZ(33,"mat-form-field",14),e._UZ(34,"input",22),e.YNc(35,J,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",21),e.TgZ(37,"div",13),e.TgZ(38,"mat-form-field",14),e._UZ(39,"input",23),e.YNc(40,U,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",21),e.TgZ(42,"div",13),e.TgZ(43,"mat-form-field",14),e._UZ(44,"input",24),e.YNc(45,S,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",21),e.TgZ(47,"div",13),e.TgZ(48,"mat-form-field",14),e._UZ(49,"input",25),e.YNc(50,Q,2,1,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",2),e.TgZ(52,"div",26),e.TgZ(53,"div",13),e.TgZ(54,"mat-form-field",14),e.TgZ(55,"mat-label"),e._uU(56,"Marco"),e.qZA(),e.TgZ(57,"mat-select",27),e.NdJ("valueChange",function(r){return o.selectedMarco=r})("selectionChange",function(r){return o.changeMarco(r.value)}),e.YNc(58,Y,2,2,"mat-option",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",26),e.TgZ(60,"div",13),e.TgZ(61,"mat-form-field",14),e.TgZ(62,"mat-label"),e._uU(63,"Tama\xf1o"),e.qZA(),e.TgZ(64,"mat-select",27),e.NdJ("valueChange",function(r){return o.selectedTamano=r})("selectionChange",function(r){return o.changeTamano(r.value)}),e.YNc(65,j,2,2,"mat-option",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"div",26),e.TgZ(67,"div",13),e.TgZ(68,"mat-form-field",14),e.TgZ(69,"mat-label"),e._uU(70,"Tipo paquete"),e.qZA(),e.TgZ(71,"mat-select",27),e.NdJ("valueChange",function(r){return o.selectedTipoPaquete=r})("selectionChange",function(r){return o.changeTipoPaquete(r.value)}),e.YNc(72,D,2,2,"mat-option",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"div",2),e.TgZ(74,"div",19),e.TgZ(75,"div",13),e.TgZ(76,"input",29),e.NdJ("change",function(r){return o.onFileSelected(r)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(77,"div",2),e.TgZ(78,"button",30),e._uU(79,"Editar Paquete"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(80,"div",31),e.TgZ(81,"h2"),e._uU(82,"Imagen actual"),e.qZA(),e.YNc(83,k,2,1,"ng-container",32),e.YNc(84,z,1,1,"ng-template",null,33,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const s=e.MAs(85);e.xp6(11),e.Q6J("formGroup",o.editarPaqueteForm),e.xp6(7),e.Q6J("ngIf",o.isValidField("nombre")),e.xp6(5),e.Q6J("ngIf",o.isValidField("precio")),e.xp6(6),e.Q6J("ngIf",o.isValidField("descripcion")),e.xp6(6),e.Q6J("ngIf",o.isValidField("hrs_Video")),e.xp6(5),e.Q6J("ngIf",o.isValidField("no_Fotos_Dig")),e.xp6(5),e.Q6J("ngIf",o.isValidField("no_Fotos_Fis")),e.xp6(5),e.Q6J("ngIf",o.isValidField("no_Fotos_Enm")),e.xp6(7),e.Q6J("value",o.selectedMarco),e.xp6(1),e.Q6J("ngForOf",o.marcos),e.xp6(6),e.Q6J("value",o.selectedTamano),e.xp6(1),e.Q6J("ngForOf",o.tamanos),e.xp6(6),e.Q6J("value",o.selectedTipoPaquete),e.xp6(1),e.Q6J("ngForOf",o.tipo_paqutes),e.xp6(6),e.Q6J("disabled",o.editarPaqueteForm.invalid),e.xp6(5),e.Q6J("ngIf",null==o.url)("ngIfElse",s)}},directives:[n._Y,n.JL,n.sg,g.KE,x.Nt,n.Fj,n.JJ,n.u,p.O5,n.wV,g.hX,w.gD,p.sg,I.lW,g.TO,O.ey],styles:[".editpaquete-form[_ngcontent-%COMP%]{padding:4rem 1rem}mat-card[_ngcontent-%COMP%]{max-width:300px;margin:2rem auto;text-align:center;height:350px}.full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%}.width-input-20[_ngcontent-%COMP%]{width:20%}.width-input-30[_ngcontent-%COMP%]{width:30%}.width-input-40[_ngcontent-%COMP%]{width:40%}.width-input-50[_ngcontent-%COMP%]{width:50%}.width-input-60[_ngcontent-%COMP%]{width:60%}.width-input-70[_ngcontent-%COMP%]{width:70%}.width-input-80[_ngcontent-%COMP%]{width:80%}.width-input-90[_ngcontent-%COMP%]{width:90%}.separator[_ngcontent-%COMP%]{margin-bottom:2rem}input[_ngcontent-%COMP%]{margin:0!important}.card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;border:1px solid rgba(0,0,0,.05);border-radius:.375rem;background-color:#fff;background-clip:border-box}.card[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{margin-right:0;margin-left:0}.card-body[_ngcontent-%COMP%]{padding:1.5rem;flex:1 1 auto}.bg-secondary[_ngcontent-%COMP%]{background-color:#f7fafc!important}a.bg-secondary[_ngcontent-%COMP%]:hover, a.bg-secondary[_ngcontent-%COMP%]:focus, button.bg-secondary[_ngcontent-%COMP%]:hover, button.bg-secondary[_ngcontent-%COMP%]:focus{background-color:#d2e3ee!important}.mt-7[_ngcontent-%COMP%]{margin-top:6rem!important}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%], .h6[_ngcontent-%COMP%]{font-family:inherit;font-weight:600;line-height:1.5;margin-bottom:.5rem;color:#32325d}h2[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%]{font-size:1.25rem}h3[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%]{font-size:1.0625rem}.img-form[_ngcontent-%COMP%]{width:130%;max-width:400px}"]}),i})()}];let L=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[c.Bz.forChild($)],c.Bz]}),i})();var R=d(9731);let B=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,L,R.q,n.u5,n.UX]]}),i})()}}]);