"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[17],{8017:(M,c,r)=>{r.r(c),r.d(c,{ChangepasswordModule:()=>x});var h=r(8583),u=r(4655),n=r(3679),g=r(9765),f=r(5319),C=r(6782),t=r(7716),v=r(8060),w=r(9344),p=r(3738),m=r(8295),Z=r(9983),T=r(1095),b=r(6627);function P(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.getErrorMessage("contrasena")," ")}}function y(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.getErrorMessage("nuevaContrasena")," ")}}function A(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.getErrorMessage("confirmarContrasena")," ")}}function F(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Las contrase\xf1as no coinciden "),t.qZA())}const N=[{path:"",component:(()=>{class e{constructor(a,o,s){this.authService=a,this.router=o,this.toastr=s,this.hidePassword=!0,this.hideNewPassword=!0,this.hideConfirmPassword=!0,this.destroy$=new g.xQ,this.user=null,this.subscription=new f.w,this.changeForm=new n.cw({contrasena:new n.NI("",[n.kI.required,n.kI.pattern("((?=.*d)(?=.*[a-z])(?=.*[A-Z]).{8,30})")]),nuevaContrasena:new n.NI("",[n.kI.required,n.kI.pattern("((?=.*d)(?=.*[a-z])(?=.*[A-Z]).{8,30})")]),confirmarContrasena:new n.NI("",[n.kI.required,n.kI.pattern("((?=.*d)(?=.*[a-z])(?=.*[A-Z]).{8,30})")])})}ngOnInit(){}changePassword(){this.getUser(),this.authService.changePassword(this.changeForm.value,this.user.id).subscribe(o=>{"Se ha modificado la contrase\xf1a"==o.message&&(this.toastr.success("El cambio de contrase\xf1a fue realizado exitosamente","Cambio de contrase\xf1a",{positionClass:"toast-bottom-right"}),this.router.navigate([""]))})}getUser(){this.subscription.add(this.authService.user$.pipe((0,C.R)(this.destroy$)).subscribe(a=>{a&&(this.user=a)}))}getErrorMessage(a){var o,s,d;let l="";return(null===(s=null===(o=this.changeForm.get(a))||void 0===o?void 0:o.errors)||void 0===s?void 0:s.required)?l="You must enter a value":(null===(d=this.changeForm.get(a))||void 0===d?void 0:d.hasError("pattern"))&&(l="Not a valid password at least one uppercase, one lowercase and one number"),l}isValidField(a){let o=this.changeForm.get(a);return(null==o?void 0:o.touched)||(null==o?void 0:o.dirty)&&!(null==o?void 0:o.valid)}isEqualsPasswords(a,o){let s=this.changeForm.get(a),d=this.changeForm.get(o);return(null==s?void 0:s.value)==(null==d?void 0:d.value)}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(v.e),t.Y36(u.F0),t.Y36(w._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-changepassword"]],decls:27,vars:12,consts:[[1,"change-form"],[3,"formGroup","ngSubmit"],[1,"full-width-input"],["matInput","","formControlName","contrasena","placeholder","Contrase\xf1a actual",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],[4,"ngIf"],[1,"full-width-input","mt-4"],["matInput","","formControlName","nuevaContrasena","placeholder","Nueva contrase\xf1a",3,"type"],["matInput","","formControlName","confirmarContrasena","placeholder","Confirmar nueva contrase\xf1a",3,"type"],["mat-raised-button","","type","submit","color","primary",1,"mt-4",3,"disabled"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-content"),t.TgZ(3,"h1"),t._uU(4,"Cambiar contrase\xf1a"),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return o.changePassword()}),t.TgZ(6,"mat-form-field",2),t._UZ(7,"input",3),t.TgZ(8,"button",4),t.NdJ("click",function(){return o.hidePassword=!o.hidePassword}),t.TgZ(9,"mat-icon"),t._uU(10),t.qZA(),t.qZA(),t.YNc(11,P,2,1,"mat-error",5),t.qZA(),t.TgZ(12,"mat-form-field",6),t._UZ(13,"input",7),t.TgZ(14,"button",4),t.NdJ("click",function(){return o.hideNewPassword=!o.hideNewPassword}),t.TgZ(15,"mat-icon"),t._uU(16),t.qZA(),t.qZA(),t.YNc(17,y,2,1,"mat-error",5),t.qZA(),t.TgZ(18,"mat-form-field",6),t._UZ(19,"input",8),t.TgZ(20,"button",4),t.NdJ("click",function(){return o.hideConfirmPassword=!o.hideConfirmPassword}),t.TgZ(21,"mat-icon"),t._uU(22),t.qZA(),t.qZA(),t.YNc(23,A,2,1,"mat-error",5),t.YNc(24,F,2,0,"mat-error",5),t.qZA(),t.TgZ(25,"button",9),t._uU(26,"Cambiar contrase\xf1a"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.Q6J("formGroup",o.changeForm),t.xp6(2),t.Q6J("type",o.hidePassword?"password":"text"),t.xp6(3),t.Oqu(o.hidePassword?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",o.isValidField("contrasena")),t.xp6(2),t.Q6J("type",o.hideNewPassword?"password":"text"),t.xp6(3),t.Oqu(o.hideNewPassword?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",o.isValidField("nuevaContrasena")),t.xp6(2),t.Q6J("type",o.hideConfirmPassword?"password":"text"),t.xp6(3),t.Oqu(o.hideConfirmPassword?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",o.isValidField("confirmarContrasena")),t.xp6(1),t.Q6J("ngIf",!o.isEqualsPasswords("nuevaContrasena","confirmarContrasena")),t.xp6(1),t.Q6J("disabled",o.changeForm.invalid))},directives:[p.a8,p.dn,n._Y,n.JL,n.sg,m.KE,Z.Nt,n.Fj,n.JJ,n.u,T.lW,m.R9,b.Hw,h.O5,m.TO],styles:[".change-form[_ngcontent-%COMP%]{padding:4rem 1rem}mat-card[_ngcontent-%COMP%]{max-width:300px;margin:2rem auto;text-align:center;height:350px}.full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%}.separator[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.Bz.forChild(N)],u.Bz]}),e})();var J=r(9731);let x=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[h.ez,I,J.q,n.u5,n.UX]]}),e})()}}]);