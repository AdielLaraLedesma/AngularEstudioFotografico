"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[911],{1911:(Q,u,a)=>{a.r(u),a.d(u,{DetalleservicioModule:()=>Y});var m=a(8583),d=a(4655),c=a(3679),p=a(9765),h=a(5319),f=a(6782),_=a(2340),e=a(7716),Z=a(1906),x=a(8060),T=a(9344),v=a(9075),b=a(6627),C=a(1095);function A(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"img",16),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).removeImagen(s)}),e.qZA()}2&i&&e.Q6J("src",n.$implicit,e.LSH)}function y(i,n){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"h2"),e._uU(2,"Imagenes seleccionadas"),e.qZA(),e.YNc(3,A,1,1,"img",15),e._UZ(4,"br"),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.imagesHtml)}}function q(i,n){if(1&i&&(e.TgZ(0,"h3",17),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.servicioEvento.paquete_nombre)}}function M(i,n){if(1&i&&(e.TgZ(0,"h3"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.servicioEvento.estatus_nombre)}}function S(i,n){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"mat-icon"),e._uU(2,"calendar_today"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" Fecha del evento : ",t.servicioEvento.fecha_evento," ")}}function D(i,n){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"mat-icon"),e._uU(2,"place"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" Direccion : ",t.servicioEvento.direccion," ")}}function w(i,n){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"mat-icon"),e._uU(2,"face"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" Nombre del cliente : ",t.servicioEvento.nombre_cliente," ")}}function I(i,n){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"mat-icon"),e._uU(2,"credit_card"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" El total es : ",t.servicioEvento.total," ")}}function O(i,n){1&i&&(e.TgZ(0,"span"),e.TgZ(1,"mat-icon"),e._uU(2,"image"),e.qZA(),e._uU(3," Total de imagenes digitales : "),e.qZA())}function H(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"form",18),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().agregarMultimedia()}),e.TgZ(2,"div",13),e.TgZ(3,"div",12),e.TgZ(4,"div",19),e.TgZ(5,"input",20),e.NdJ("change",function(r){return e.CHM(t),e.oxw().onImageSelected(r)}),e.qZA(),e.TgZ(6,"label",21),e.TgZ(7,"mat-icon",22),e._uU(8,"add"),e.qZA(),e._uU(9,"Seleccionar imagenes "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",12),e.TgZ(11,"div",19),e.TgZ(12,"input",23),e.NdJ("change",function(r){return e.CHM(t),e.oxw().onVideoSelected(r)}),e.qZA(),e.TgZ(13,"label",24),e.TgZ(14,"mat-icon",22),e._uU(15,"add"),e.qZA(),e._uU(16,"Seleccionar video "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",25),e.TgZ(18,"button",26),e._uU(19," Guardar cambios "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.agregarImagenesVideoForm),e.xp6(17),e.Q6J("disabled",t.agregarImagenesVideoForm.invalid)}}function P(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"video",28),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).removeImagen(s)}),e._UZ(1,"source",29),e.qZA()}if(2&i){const t=n.$implicit;e.xp6(1),e.Q6J("src",t,e.LSH)}}function U(i,n){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"h2"),e._uU(2,"Videos seleccionados"),e.qZA(),e.YNc(3,P,2,1,"video",27),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.videosHtml)}}const F=[{path:"",component:(()=>{class i{constructor(t,o,r,s,l,g){this.rutaActiva=t,this.fotografoService=o,this.authService=r,this.toastr=s,this.router=l,this.sanitizer=g,this.url=_.N.url,this.contador=0,this.id="",this.servicioEvento={id:0,cliente_id:0,fotografo_id:0,paquete_id:0,fecha_evento:new Date,direccion:"",marco_id:0,total:0,estatus_id:0,pago_id:0,activo:!1,usuario_registro_id:0,fecha_registro:0,nombre_cliente:"",paquete_nombre:"",estatus_nombre:""},this.destroy$=new p.xQ,this.user=null,this.subscription=new h.w,this.images=[],this.imagesHtml=[],this.videoCollection=[],this.videoCollectionSafe=[],this.videos=[],this.videosHtml=[],this.agregarImagenesVideoForm=new c.cw({files:new c.NI([c.kI.required]),usuario_modificacion_id:new c.NI("",[c.kI.required])})}ngOnDestroy(){this.subscription.unsubscribe(),this.destroy$.next({}),this.destroy$.complete()}ngOnInit(){this.getUser(),this.id=this.rutaActiva.snapshot.params.id,this.subscription.add(this.fotografoService.getServicio(this.id).subscribe(t=>{t||this.router.navigate([`/serviciosfotografo/${this.user.id}`]),this.servicioEvento=t})),this.subscription.add(this.fotografoService.getImages(this.id).subscribe(t=>{console.log(t),t.forEach(o=>{this.imagesHtml.push(this.url+o.url_imagen)})})),this.subscription.add(this.fotografoService.getVideos(this.id).subscribe(t=>{console.log(t);for(var o=0;o<t.length;o++)this.videosHtml.push(this.url+t[o].url_video);console.log(this.videosHtml),console.log(this.imagesHtml)}))}removeImagen(t){for(var o=0;o<this.images.length;o++)this.imagesHtml[o]===t&&(this.imagesHtml.splice(o,1),this.images.splice(o,1),o--)}agregarMultimedia(){var t,o;const r=new FormData;r.append("usuario_modificacion_id",null===(t=this.agregarImagenesVideoForm.get("usuario_modificacion_id"))||void 0===t?void 0:t.value);for(var s=0;s<this.images.length;s++)r.append("image",this.images[s]);this.fotografoService.updateImg(this.id,r).subscribe(g=>{console.log(g),this.toastr.success("Se han agregado las imagenes correctamente","Imagenes agregadas",{positionClass:"toast-bottom-right"})});let l=new FormData;for(l.append("usuario_modificacion_id",null===(o=this.agregarImagenesVideoForm.get("usuario_modificacion_id"))||void 0===o?void 0:o.value),s=0;s<this.videos.length;s++)l.append("video",this.videos[s]);this.fotografoService.updateVideo(this.id,l).subscribe(g=>{console.log(g),this.toastr.success("Se han agregado los videos correctamente","Videos agregadas",{positionClass:"toast-bottom-right"}),this.router.navigate([`/serviciosfotografo/${this.id}`])})}getUser(){this.subscription.add(this.authService.user$.pipe((0,f.R)(this.destroy$)).subscribe(t=>{t&&(this.user=t,this.agregarImagenesVideoForm.controls.usuario_modificacion_id.setValue(this.user.id))}))}onImageSelected(t){console.log("aqui entro");for(var o=0;o<t.target.files.length;o++){this.images.push(t.target.files[o]);const r=new FileReader;r.onload=s=>{this.imagesHtml.push(s.target.result)},r.readAsDataURL(t.target.files[o])}}onVideoSelected(t){console.log("aqui entro");for(var o=0;o<t.target.files.length;o++){this.videos.push(t.target.files[o]);var r=new FileReader;r.onload=s=>{this.videosHtml.push(s.target.result)},r.readAsDataURL(t.target.files[o])}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.gz),e.Y36(Z.q),e.Y36(x.e),e.Y36(T._W),e.Y36(d.F0),e.Y36(v.H7))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-detalleservicio"]],decls:27,vars:16,consts:[[1,"main-content"],[1,"container","mt-4"],[1,"row"],["class","col-xl-3 order-xl-1",4,"ngIf"],[1,"m-auto","order-xl-1"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-12","header"],["class","mb-0",4,"ngIf"],[4,"ngIf"],[1,"card-body"],[1,"col-lg-6"],[1,"row","mt-4"],[1,"col-xl-3","order-xl-1"],["class","img-form","style","margin: 3px;",3,"src","click",4,"ngFor","ngForOf"],[1,"img-form",2,"margin","3px",3,"src","click"],[1,"mb-0"],[3,"formGroup","ngSubmit"],[1,"form-group","focused"],["multiple","","id","img","type","file",1,"hiden",2,"display","none",3,"change"],["for","img",1,"btn","btn-outline-primary"],[2,"font-size","20px !important"],["multiple","","id","vid","type","file",1,"hiden",2,"display","none",3,"change"],["for","vid",1,"btn","btn-outline-primary"],[1,"row","mt-2"],["mat-raised-button","","type","submit","color","primary",2,"width","100%",3,"disabled"],["width","200","height","200","controls","",3,"click",4,"ngFor","ngForOf"],["width","200","height","200","controls","",3,"click"],["type","video/mp4",3,"src"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,y,5,1,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.YNc(9,q,2,1,"h3",9),e.YNc(10,M,2,1,"h3",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",11),e.TgZ(12,"div",2),e.TgZ(13,"div",12),e.YNc(14,S,4,1,"span",10),e.qZA(),e.TgZ(15,"div",12),e.YNc(16,D,4,1,"span",10),e.qZA(),e.qZA(),e.TgZ(17,"div",13),e.TgZ(18,"div",12),e.YNc(19,w,4,1,"span",10),e.qZA(),e.TgZ(20,"div",12),e.YNc(21,I,4,1,"span",10),e.qZA(),e.qZA(),e.TgZ(22,"div",13),e.TgZ(23,"div",12),e.YNc(24,O,4,0,"span",10),e.qZA(),e.qZA(),e.YNc(25,H,20,2,"div",10),e.qZA(),e.qZA(),e.qZA(),e.YNc(26,U,4,1,"div",3),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",0!=o.imagesHtml.length),e.xp6(1),e.ekj("col-xl-6",0!=o.videosHtml.length&&0!=o.imagesHtml.length)("col-xl-12",0==o.videosHtml.length&&0==o.imagesHtml.length)("col-xl-9",0==o.videosHtml.length||0==o.imagesHtml.length),e.xp6(5),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(1),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(4),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(2),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(3),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(2),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(3),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(1),e.Q6J("ngIf",null!=o.servicioEvento&&"En espera de interaccion del fotografo"==o.servicioEvento.estatus_nombre),e.xp6(1),e.Q6J("ngIf",0!=o.videosHtml.length))},directives:[m.O5,m.sg,b.Hw,c._Y,c.JL,c.sg,C.lW],styles:[".card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;border:1px solid rgba(0,0,0,.05);border-radius:.375rem;background-color:#fff;background-clip:border-box}.card[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{margin-right:0;margin-left:0}.card-body[_ngcontent-%COMP%]{padding:1.5rem;flex:1 1 auto}.bg-secondary[_ngcontent-%COMP%]{background-color:#f7fafc!important}a.bg-secondary[_ngcontent-%COMP%]:hover, a.bg-secondary[_ngcontent-%COMP%]:focus, button.bg-secondary[_ngcontent-%COMP%]:hover, button.bg-secondary[_ngcontent-%COMP%]:focus{background-color:#d2e3ee!important}.mt-4[_ngcontent-%COMP%]{margin-top:4rem!important}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%], .h6[_ngcontent-%COMP%]{font-family:inherit;font-weight:600;line-height:1.5;margin-bottom:.5rem;color:#32325d}h2[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%]{font-size:1.25rem}h3[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%]{font-size:1.0625rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.img-form[_ngcontent-%COMP%]{height:50px;max-width:400px}"]}),i})()}];let J=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.Bz.forChild(F)],d.Bz]}),i})();var E=a(9731);let N=(()=>{class i{constructor(t){this._sanitizer=t}transform(t,o){switch(o){case"html":return this._sanitizer.bypassSecurityTrustHtml(t);case"style":return this._sanitizer.bypassSecurityTrustStyle(t);case"script":return this._sanitizer.bypassSecurityTrustScript(t);case"url":return this._sanitizer.bypassSecurityTrustUrl(t);case"resourceUrl":return this._sanitizer.bypassSecurityTrustResourceUrl(t);default:return this._sanitizer.bypassSecurityTrustHtml(t)}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.H7,16))},i.\u0275pipe=e.Yjl({name:"safePipe",type:i,pure:!0}),i})(),Y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[N],imports:[[m.ez,J,E.q,c.u5,c.UX]]}),i})()}}]);