"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[337],{5337:(G,f,s)=>{s.r(f),s.d(f,{FotografoModule:()=>k});var p=s(8583),d=s(4655),_=s(6343),Z=s(6823),c=s(3679),b=s(9765),x=s(5319),T=s(6782),g=s(2340),e=s(7716),C=s(1841),q=s(205),u=s(8002),m=s(5304),v=s(9344);let A=(()=>{class i{constructor(t,o){this.http=t,this.toastr=o}getServicios(t){return this.http.get(`${g.N.baseUrl}/servicios_evento/byFotografo/${t}`).pipe((0,u.U)(o=>o),(0,m.K)(o=>this.handlerError(o)))}getServicio(t){return this.http.get(`${g.N.baseUrl}/servicios_evento/${t}`).pipe((0,u.U)(o=>o),(0,m.K)(o=>this.handlerError(o)))}updateImg(t,o){return console.log(o),this.http.put(`${g.N.baseUrl}/servicios_evento/subir_imagenes/${t}`,o).pipe((0,u.U)(n=>n),(0,m.K)(n=>this.handlerError(n)))}updateVideo(t,o){return this.http.put(`${g.N.baseUrl}/servicios_evento/subir_videos/${t}`,o).pipe((0,u.U)(n=>n),(0,m.K)(n=>this.handlerError(n)))}getImages(t){return this.http.get(`${g.N.baseUrl}/servicios_evento/imagenes/${t}`).pipe((0,u.U)(o=>o),(0,m.K)(o=>this.handlerError(o)))}getVideos(t){const o=new C.WM;return o.append("Content-Type","application/json"),o.append("Access-Control-Allow-Headers","application/json"),this.http.get(`${g.N.baseUrl}/servicios_evento/videos/${t}`,{headers:o}).pipe((0,u.U)(n=>n),(0,m.K)(n=>this.handlerError(n)))}handlerError(t){let o="An errror occured retrienving data";return t&&(o=`Error: code ${t.message}`),this.toastr.error(o),(0,q._)(o)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(C.eN),e.LFG(v._W))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var y=s(8060),U=s(9075),M=s(6627),F=s(1095);function O(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"img",16),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).removeImagen(a)}),e.qZA()}2&i&&e.Q6J("src",r.$implicit,e.LSH)}function w(i,r){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"h2"),e._uU(2,"Imagenes seleccionadas"),e.qZA(),e.YNc(3,O,1,1,"img",15),e._UZ(4,"br"),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.imagesHtml)}}function S(i,r){if(1&i&&(e.TgZ(0,"h3",17),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.servicioEvento.paquete_nombre)}}function E(i,r){if(1&i&&(e.TgZ(0,"h3"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.servicioEvento.estatus_nombre)}}function I(i,r){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"mat-icon"),e._uU(2,"calendar_today"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" Fecha del evento : ",t.servicioEvento.fecha_evento," ")}}function H(i,r){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"mat-icon"),e._uU(2,"place"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" Direccion : ",t.servicioEvento.direccion," ")}}function D(i,r){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"mat-icon"),e._uU(2,"face"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" Nombre del cliente : ",t.servicioEvento.nombre_cliente," ")}}function N(i,r){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"mat-icon"),e._uU(2,"credit_card"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" El total es : ",t.servicioEvento.total," ")}}function P(i,r){1&i&&(e.TgZ(0,"span"),e.TgZ(1,"mat-icon"),e._uU(2,"image"),e.qZA(),e._uU(3," Total de imagenes digitales : "),e.qZA())}function $(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"form",18),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().agregarMultimedia()}),e.TgZ(2,"div",13),e.TgZ(3,"div",12),e.TgZ(4,"div",19),e.TgZ(5,"input",20),e.NdJ("change",function(n){return e.CHM(t),e.oxw().onImageSelected(n)}),e.qZA(),e.TgZ(6,"label",21),e.TgZ(7,"mat-icon",22),e._uU(8,"add"),e.qZA(),e._uU(9,"Seleccionar imagenes "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",12),e.TgZ(11,"div",19),e.TgZ(12,"input",23),e.NdJ("change",function(n){return e.CHM(t),e.oxw().onVideoSelected(n)}),e.qZA(),e.TgZ(13,"label",24),e.TgZ(14,"mat-icon",22),e._uU(15,"add"),e.qZA(),e._uU(16,"Seleccionar video "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",25),e.TgZ(18,"button",26),e._uU(19," Guardar cambios "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.agregarImagenesVideoForm),e.xp6(17),e.Q6J("disabled",t.agregarImagenesVideoForm.invalid)}}function Y(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"video",28),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).removeImagen(a)}),e._UZ(1,"source",29),e.qZA()}if(2&i){const t=r.$implicit;e.xp6(1),e.Q6J("src",t,e.LSH)}}function J(i,r){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"h2"),e._uU(2,"Videos seleccionados"),e.qZA(),e.YNc(3,Y,2,1,"video",27),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.videosHtml)}}function L(i,r){if(1&i&&(e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"h2"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e.TgZ(5,"h3",6),e._uU(6),e.qZA(),e.TgZ(7,"h3",7),e._uU(8),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,o=e.oxw();e.MGl("routerLink","/fotografo/servicios/detalle/",t.id,""),e.xp6(1),e.Udp("border-color",o.getColor(t.estatus_nombre)),e.xp6(1),e.Udp("color",o.getColor(t.estatus_nombre)),e.xp6(1),e.Oqu(t.nombre_cliente),e.xp6(3),e.Oqu(t.paquete_nombre),e.xp6(2),e.hij(" ",t.estatus_nombre," ")}}const j=[{path:"",children:[{path:"detalle/:id",component:(()=>{class i{constructor(t,o,n,a,l,h){this.rutaActiva=t,this.fotografoService=o,this.authService=n,this.toastr=a,this.router=l,this.sanitizer=h,this.url=g.N.url,this.contador=0,this.id="",this.servicioEvento={id:0,cliente_id:0,fotografo_id:0,paquete_id:0,fecha_evento:new Date,direccion:"",marco_id:0,total:0,estatus_id:0,pago_id:0,activo:!1,usuario_registro_id:0,fecha_registro:0,nombre_cliente:"",paquete_nombre:"",estatus_nombre:""},this.destroy$=new b.xQ,this.user=null,this.subscription=new x.w,this.images=[],this.imagesHtml=[],this.videoCollection=[],this.videoCollectionSafe=[],this.videos=[],this.videosHtml=[],this.agregarImagenesVideoForm=new c.cw({files:new c.NI([c.kI.required]),usuario_modificacion_id:new c.NI("",[c.kI.required])})}ngOnDestroy(){this.subscription.unsubscribe(),this.destroy$.next({}),this.destroy$.complete()}ngOnInit(){this.getUser(),this.id=this.rutaActiva.snapshot.params.id,this.subscription.add(this.fotografoService.getServicio(this.id).subscribe(t=>{t||this.router.navigate([`/serviciosfotografo/${this.user.id}`]),this.servicioEvento=t})),this.subscription.add(this.fotografoService.getImages(this.id).subscribe(t=>{console.log(t),t.forEach(o=>{this.imagesHtml.push(this.url+o.url_imagen)})})),this.subscription.add(this.fotografoService.getVideos(this.id).subscribe(t=>{console.log(t);for(var o=0;o<t.length;o++)this.videosHtml.push(this.url+t[o].url_video);console.log(this.videosHtml),console.log(this.imagesHtml)}))}removeImagen(t){for(var o=0;o<this.images.length;o++)this.imagesHtml[o]===t&&(this.imagesHtml.splice(o,1),this.images.splice(o,1),o--)}agregarMultimedia(){var t,o;const n=new FormData;n.append("usuario_modificacion_id",null===(t=this.agregarImagenesVideoForm.get("usuario_modificacion_id"))||void 0===t?void 0:t.value);for(var a=0;a<this.images.length;a++)n.append("image",this.images[a]);this.fotografoService.updateImg(this.id,n).subscribe(h=>{console.log(h),this.toastr.success("Se han agregado las imagenes correctamente","Imagenes agregadas",{positionClass:"toast-bottom-right"})});let l=new FormData;for(l.append("usuario_modificacion_id",null===(o=this.agregarImagenesVideoForm.get("usuario_modificacion_id"))||void 0===o?void 0:o.value),a=0;a<this.videos.length;a++)l.append("video",this.videos[a]);this.fotografoService.updateVideo(this.id,l).subscribe(h=>{console.log(h),this.toastr.success("Se han agregado los videos correctamente","Videos agregadas",{positionClass:"toast-bottom-right"}),this.router.navigate([`/serviciosfotografo/${this.id}`])})}getUser(){this.user=this.authService.getUser(),null==this.user&&this.subscription.add(this.authService.user$.pipe((0,T.R)(this.destroy$)).subscribe(t=>{t&&(this.user=t)}))}onImageSelected(t){console.log("aqui entro");for(var o=0;o<t.target.files.length;o++){this.images.push(t.target.files[o]);const n=new FileReader;n.onload=a=>{this.imagesHtml.push(a.target.result)},n.readAsDataURL(t.target.files[o])}}onVideoSelected(t){console.log("aqui entro");for(var o=0;o<t.target.files.length;o++){this.videos.push(t.target.files[o]);var n=new FileReader;n.onload=a=>{this.videosHtml.push(a.target.result)},n.readAsDataURL(t.target.files[o])}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.gz),e.Y36(A),e.Y36(y.e),e.Y36(v._W),e.Y36(d.F0),e.Y36(U.H7))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-detalle"]],decls:27,vars:16,consts:[[1,"main-content"],[1,"container","mt-4"],[1,"row"],["class","col-xl-3 order-xl-1",4,"ngIf"],[1,"m-auto","order-xl-1"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-12","header"],["class","mb-0",4,"ngIf"],[4,"ngIf"],[1,"card-body"],[1,"col-lg-6"],[1,"row","mt-4"],[1,"col-xl-3","order-xl-1"],["class","img-form","style","margin: 3px;",3,"src","click",4,"ngFor","ngForOf"],[1,"img-form",2,"margin","3px",3,"src","click"],[1,"mb-0"],[3,"formGroup","ngSubmit"],[1,"form-group","focused"],["multiple","","id","img","type","file",1,"hiden",2,"display","none",3,"change"],["for","img",1,"btn","btn-outline-primary"],[2,"font-size","20px !important"],["multiple","","id","vid","type","file",1,"hiden",2,"display","none",3,"change"],["for","vid",1,"btn","btn-outline-primary"],[1,"row","mt-2"],["mat-raised-button","","type","submit","color","primary",2,"width","100%",3,"disabled"],["width","200","height","200","controls","",3,"click",4,"ngFor","ngForOf"],["width","200","height","200","controls","",3,"click"],["type","video/mp4",3,"src"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,w,5,1,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.YNc(9,S,2,1,"h3",9),e.YNc(10,E,2,1,"h3",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",11),e.TgZ(12,"div",2),e.TgZ(13,"div",12),e.YNc(14,I,4,1,"span",10),e.qZA(),e.TgZ(15,"div",12),e.YNc(16,H,4,1,"span",10),e.qZA(),e.qZA(),e.TgZ(17,"div",13),e.TgZ(18,"div",12),e.YNc(19,D,4,1,"span",10),e.qZA(),e.TgZ(20,"div",12),e.YNc(21,N,4,1,"span",10),e.qZA(),e.qZA(),e.TgZ(22,"div",13),e.TgZ(23,"div",12),e.YNc(24,P,4,0,"span",10),e.qZA(),e.qZA(),e.YNc(25,$,20,2,"div",10),e.qZA(),e.qZA(),e.qZA(),e.YNc(26,J,4,1,"div",3),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",0!=o.imagesHtml.length),e.xp6(1),e.ekj("col-xl-6",0!=o.videosHtml.length&&0!=o.imagesHtml.length)("col-xl-12",0==o.videosHtml.length&&0==o.imagesHtml.length)("col-xl-9",0==o.videosHtml.length||0==o.imagesHtml.length),e.xp6(5),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(1),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(4),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(2),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(3),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(2),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(3),e.Q6J("ngIf",null!=o.servicioEvento),e.xp6(1),e.Q6J("ngIf",null!=o.servicioEvento&&"En espera de interaccion del fotografo"==o.servicioEvento.estatus_nombre),e.xp6(1),e.Q6J("ngIf",0!=o.videosHtml.length))},directives:[p.O5,p.sg,M.Hw,c._Y,c.JL,c.sg,F.lW],styles:[".card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;border:1px solid rgba(0,0,0,.05);border-radius:.375rem;background-color:#fff;background-clip:border-box}.card[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{margin-right:0;margin-left:0}.card-body[_ngcontent-%COMP%]{padding:1.5rem;flex:1 1 auto}.bg-secondary[_ngcontent-%COMP%]{background-color:#f7fafc!important}a.bg-secondary[_ngcontent-%COMP%]:hover, a.bg-secondary[_ngcontent-%COMP%]:focus, button.bg-secondary[_ngcontent-%COMP%]:hover, button.bg-secondary[_ngcontent-%COMP%]:focus{background-color:#d2e3ee!important}.mt-4[_ngcontent-%COMP%]{margin-top:4rem!important}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%], .h6[_ngcontent-%COMP%]{font-family:inherit;font-weight:600;line-height:1.5;margin-bottom:.5rem;color:#32325d}h2[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%]{font-size:1.25rem}h3[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%]{font-size:1.0625rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.img-form[_ngcontent-%COMP%]{height:50px;max-width:400px}"]}),i})(),canActivate:[Z.X,_._]},{path:":id",component:(()=>{class i{constructor(t,o,n,a,l){this.rutaActiva=t,this.authService=o,this.fotografoService=n,this.router=a,this.toastr=l,this.id="",this.destroy$=new b.xQ,this.user=null,this.subscription=new x.w}ngOnInit(){this.getUser(),this.id=this.rutaActiva.snapshot.params.id,this.user.id.toString()==this.id?this.subscription.add(this.fotografoService.getServicios(this.id).subscribe(t=>{this.servicioEventos=t})):this.router.navigate(["/"])}ngOnDestroy(){this.subscription.unsubscribe()}getUser(){this.user=this.authService.getUser(),null==this.user&&this.subscription.add(this.authService.user$.pipe((0,T.R)(this.destroy$)).subscribe(t=>{t&&(this.user=t)}))}getColor(t){switch(t){case"Solicitado/Agendado":return"yellow";case"En espera del evento":return"blue";case"En espera de interaccion del fotografo":return"red";case"En espera de interaccion del cliente":return"purple";case"Finalizando pedido":return"pink";case"Finalizado":return"green";default:return"black"}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.gz),e.Y36(y.e),e.Y36(A),e.Y36(d.F0),e.Y36(v._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-listado"]],decls:3,vars:1,consts:[[1,"main-content"],[1,"container"],["class","card mt-3",3,"routerLink",4,"ngFor","ngForOf"],[1,"card","mt-3",3,"routerLink"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,L,9,8,"div",2),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",o.servicioEventos))},directives:[p.sg,d.rH],styles:[".mt-3[_ngcontent-%COMP%]{margin-top:3rem!important}.card-header[_ngcontent-%COMP%]{border-width:1px;border-style:solid}.card-body[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.card[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),i})(),canActivate:[Z.X,_._]}]}];let z=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.Bz.forChild(j)],d.Bz]}),i})();var R=s(9731);let k=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,z,R.q,c.u5,c.UX]]}),i})()}}]);